<!DOCTYPE html>
<html lang="zh-Hans">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../style.css">
    <title>F# 函数式编程之 - 前所未见的 unit 类型</title>
  </head>
  <body>

    <h1>F# 函数式编程之 - 前所未见的 unit 类型</h1>

    <p style="text-align: right;"><i>
      Author: 102419@gmail.com<br>
      Created at: 2020-12-01
    </i></p>

    <p>现在的主流编程模式是命令式(imperative), 例如 Java, C, Python 等大多数常见的语言都属于这类。</p>
    <p>命令式编程的函数可以没有返回值，比如（以 javascript 为例）：</p>
    <pre><code>
    function ok() {
      console.log('ok')
    }
    </code></pre>

    <p>上面这个函数就没有返回值。</p>
    <p>但函数式编程则不一样，名符其实，就是由数学里的 “函数” 概念为基础的。</p>
    <p>在数学里，“函数” 表示一种映射关系，比如（以下是 F# 代码）：</p>
    <pre><code>
    let intToString x = sprintf "%i" x
    </code></pre>

    <p>上面这个函数的输入整数，输出字符，其映射关系记作 <code>int -&gt; string</code></p>
    <p>那么，如果将本文开头那里的 javascript 改成 F# 呢？</p>
    <pre><code>
    let ok () = printf "ok"
    </code></pre>

    <p>上面这个函数，是不是和 JavaScript 一个没有输入，也没有输出？不是的。</p>
    <p>它输入 unit, 输出也是 unit，其映射关系记作 <code>unit -&gt; unit</code></p>
    <p><mark>unit</mark> 是一个类型(就像 int 或 string), 而 unit 类型只有一个值 <mark><code>()</code></mark>, 很神奇, <mark><code>()</code></mark> 不是表示没有参数的括号，它其实是参数本身，就是一个值，就像 1, 2, 3 或 "abc" 一样的值。</p>
    <p>请看上面的代码，在第一个 ok 后面的括号，就是类型为 unit 的值 <code>()</code>，由于 F# 可以省略括号，所以它看起来像一对括号。</p>
    <p>我们可以把括号补充上：</p>

    <pre><code>
    let ok (()) = printf "ok"
    </code></pre>

    <p>上面的代码，外层的是括号，里面的却是类型为 unit 的值 <code>()</code>。</p>
    <p>再看看下面这个，javascript 如果再加一层括号就不行了：</p>
    <pre><code>
    function ok(()) {
      console.log('ok')
    }
    </code></pre>

    <p>上面的 javasript 代码，双层括号，会报错 SyntaxError。</p>
    <p>综上所述，javasript 里没有 <code>()</code> 这种值，而在 F# 里 <code>()</code> 是一个实在的值。</p>
    <p>本文介绍了 F# 里（同时也是函数式编程里）的一种特殊类型 unit 及其值 <code>()</code>, 虽然并没有什么了不起的作用，但在主流命令式编程中没有这个概念，有点新奇，同时也体现了在函数式编程里，函数严格遵守着映射关系。</p>
    
    <div style="margin: 50px 0; text-align: center; font-size: larger;">
      <a href="20210606a.html" title="上一页(previous)">←←</a>
      <a href="index.html" title="index">〇</a>
      <a href="20210606c.html" title="下一页(next)">→→</a>  
    </div>
  </body>
</html>